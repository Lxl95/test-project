<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>报表订阅管理平台</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", Arial, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            padding: 20px;
        }
        
        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 10px;
        }
        
        .title {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .header-controls {
            display: flex;
            gap: 15px;
        }
        
        .dashboard-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .panel {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
            padding: 20px;
            height: 100%;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ebeef5;
        }
        
        .panel-title {
            font-size: 18px;
            font-weight: bold;
            color: #409EFF;
        }
        
        .panel-actions {
            display: flex;
            gap: 10px;
        }
        
        .report-card {
            border: 1px solid #ebeef5;
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .report-card:hover {
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
            transform: translateY(-3px);
            border-color: #409EFF;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .report-name {
            font-weight: bold;
            font-size: 16px;
            color: #2c3e50;
        }
        
        .report-status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .status-dev {
            background: #f0f4ff;
            color: #5a78e0;
        }
        
        .status-sub {
            background: #f0f9eb;
            color: #67c23a;
        }
        
        .report-desc {
            color: #606266;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .report-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #909399;
        }
        
        .card-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
            gap: 8px;
        }
        
        .transfer-btn {
            padding: 5px 12px;
            font-size: 13px;
        }
        
        .subscription-panel {
            grid-column: span 2;
            margin-top: 20px;
        }
        
        .search-container {
            display: flex;
            margin-bottom: 20px;
            gap: 15px;
        }
        
        .stats-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            flex: 1;
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
        }
        
        .icon-dev {
            background: #ecf5ff;
            color: #409EFF;
        }
        
        .icon-sub {
            background: #f0f9eb;
            color: #67c23a;
        }
        
        .stat-content h3 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .stat-content p {
            color: #909399;
            font-size: 14px;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #909399;
        }
        
        .empty-state i {
            font-size: 60px;
            margin-bottom: 15px;
            color: #dcdfe6;
        }
        
        .empty-state p {
            margin-top: 10px;
        }
        
        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .subscription-form {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }
        
        .form-section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #409EFF;
            display: flex;
            align-items: center;
        }
        
        .form-section-title i {
            margin-right: 8px;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #909399;
            font-size: 14px;
            border-top: 1px solid #ebeef5;
        }
        
        @media (max-width: 1200px) {
            .dashboard-content {
                grid-template-columns: 1fr;
            }
            
            .subscription-panel {
                grid-column: span 1;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="dashboard-container">
            <!-- 头部区域 -->
            <div class="header">
                <div class="title">
                    <i class="el-icon-document"></i> 报表订阅管理平台
                </div>
                <div class="header-controls">
                    <el-button type="primary" icon="el-icon-refresh" @click="refreshData">刷新数据</el-button>
                    <el-button icon="el-icon-setting">系统设置</el-button>
                    <el-dropdown>
                        <span class="el-dropdown-link">
                            <el-avatar icon="el-icon-user-solid" size="small"></el-avatar> 管理员
                        </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item>个人中心</el-dropdown-item>
                            <el-dropdown-item>退出登录</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </div>
            </div>
            
            <!-- 统计卡片 -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon icon-dev">
                        <i class="el-icon-setting"></i>
                    </div>
                    <div class="stat-content">
                        <h3>{{ developingReports.length }}</h3>
                        <p>开发中报表</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon icon-sub">
                        <i class="el-icon-s-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3>{{ subscribableReports.length }}</h3>
                        <p>可订阅报表</p>
                    </div>
                </div>
            </div>
            
            <!-- 主内容区 -->
            <div class="dashboard-content">
                <!-- 开发中报表面板 -->
                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="el-icon-setting"></i> 开发中报表
                            <el-tag size="mini" type="info">{{ developingReports.length }}个</el-tag>
                        </div>
                        <div class="panel-actions">
                            <el-input 
                                placeholder="搜索开发中报表..." 
                                v-model="devSearch" 
                                size="small"
                                prefix-icon="el-icon-search"
                                clearable
                                style="width: 200px; margin-right: 10px;">
                            </el-input>
                            <el-button type="primary" size="small" icon="el-icon-plus">新建报表</el-button>
                        </div>
                    </div>
                    
                    <div v-if="filteredDevReports.length > 0">
                        <div class="report-card" v-for="report in filteredDevReports" :key="report.id">
                            <div class="card-header">
                                <div class="report-name">{{ report.name }}</div>
                                <div class="report-status status-dev">开发中</div>
                            </div>
                            <div class="report-desc">{{ report.description }}</div>
                            <div class="report-meta">
                                <div>负责人: {{ report.owner }}</div>
                                <div>创建: {{ report.createdAt }}</div>
                            </div>
                            <div class="card-actions">
                                <el-button 
                                    type="success" 
                                    size="small" 
                                    icon="el-icon-right" 
                                    class="transfer-btn"
                                    @click="moveToSubscribable(report)"
                                >设为可订阅</el-button>
                                <el-button type="" size="small" icon="el-icon-view">查看</el-button>
                            </div>
                        </div>
                    </div>
                    
                    <div v-else class="empty-state">
                        <i class="el-icon-folder-opened"></i>
                        <h4>暂无开发中报表</h4>
                        <p>点击"新建报表"按钮添加开发中报表</p>
                    </div>
                    
                    <div class="pagination-container">
                        <el-pagination
                            small
                            layout="prev, pager, next"
                            :total="developingReports.length"
                            :page-size="5"
                            :current-page="devPage"
                            @current-change="handleDevPageChange">
                        </el-pagination>
                    </div>
                </div>
                
                <!-- 可订阅报表面板 -->
                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="el-icon-s-check"></i> 可订阅报表
                            <el-tag size="mini" type="success">{{ subscribableReports.length }}个</el-tag>
                        </div>
                        <div class="panel-actions">
                            <el-input 
                                placeholder="搜索可订阅报表..." 
                                v-model="subSearch" 
                                size="small"
                                prefix-icon="el-icon-search"
                                clearable
                                style="width: 200px; margin-right: 10px;">
                            </el-input>
                            <el-button type="info" size="small" icon="el-icon-download">导出列表</el-button>
                        </div>
                    </div>
                    
                    <div v-if="filteredSubReports.length > 0">
                        <div class="report-card" v-for="report in filteredSubReports" :key="report.id">
                            <div class="card-header">
                                <div class="report-name">{{ report.name }}</div>
                                <div class="report-status status-sub">可订阅</div>
                            </div>
                            <div class="report-desc">{{ report.description }}</div>
                            <div class="report-meta">
                                <div>订阅人数: {{ report.subscribers }}</div>
                                <div>最后更新: {{ report.updatedAt }}</div>
                            </div>
                            <div class="card-actions">
                                <el-button 
                                    type="warning" 
                                    size="small" 
                                    icon="el-icon-back" 
                                    class="transfer-btn"
                                    @click="moveToDeveloping(report)"
                                >移回开发中</el-button>
                                <el-button type="primary" size="small" icon="el-icon-date">调整周期</el-button>
                            </div>
                        </div>
                    </div>
                    
                    <div v-else class="empty-state">
                        <i class="el-icon-folder-opened"></i>
                        <h4>暂无可订阅报表</h4>
                        <p>将开发中报表设置为可订阅状态</p>
                    </div>
                    
                    <div class="pagination-container">
                        <el-pagination
                            small
                            layout="prev, pager, next"
                            :total="subscribableReports.length"
                            :page-size="5"
                            :current-page="subPage"
                            @current-change="handleSubPageChange">
                        </el-pagination>
                    </div>
                </div>
                
                <!-- 订阅管理面板 -->
                <div class="panel subscription-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <i class="el-icon-s-order"></i> 订阅管理
                        </div>
                    </div>
                    
                    <div class="search-container">
                        <el-input placeholder="搜索订阅..." v-model="subscriptionSearch" style="width: 300px;">
                            <template slot="append">
                                <el-button icon="el-icon-search"></el-button>
                            </template>
                        </el-input>
                        <el-button type="primary" icon="el-icon-plus">新增订阅</el-button>
                    </div>
                    
                    <el-table :data="filteredSubscriptions" border style="width: 100%">
                        <el-table-column prop="reportName" label="报表名称" width="200"></el-table-column>
                        <el-table-column prop="subscriber" label="订阅人" width="150"></el-table-column>
                        <el-table-column label="状态" width="100">
                            <template slot-scope="scope">
                                <el-switch
                                    v-model="scope.row.status"
                                    active-value="active"
                                    inactive-value="inactive"
                                    active-text="启用"
                                    inactive-text="停用"
                                    @change="handleStatusChange(scope.row)"
                                ></el-switch>
                            </template>
                        </el-table-column>
                        <el-table-column label="推送周期" width="180">
                            <template slot-scope="scope">
                                <el-select v-model="scope.row.frequency" @change="handleFrequencyChange(scope.row)">
                                    <el-option label="每天" value="daily"></el-option>
                                    <el-option label="每周" value="weekly"></el-option>
                                    <el-option label="每两周" value="biweekly"></el-option>
                                    <el-option label="每月" value="monthly"></el-option>
                                </el-select>
                            </template>
                        </el-table-column>
                        <el-table-column prop="lastPush" label="最后推送时间" width="180"></el-table-column>
                        <el-table-column label="操作" width="180">
                            <template slot-scope="scope">
                                <el-button size="mini" type="text" @click="handleViewHistory(scope.row)">历史记录</el-button>
                                <el-button size="mini" type="text" icon="el-icon-edit">编辑</el-button>
                                <el-button size="mini" type="text" icon="el-icon-delete" style="color: #F56C6C;">删除</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                    
                    <div class="pagination-container">
                        <el-pagination
                            layout="total, sizes, prev, pager, next"
                            :total="subscriptions.length"
                            :page-sizes="[5, 10, 20]"
                            :page-size="pageSize"
                            :current-page="currentPage"
                            @size-change="handleSizeChange"
                            @current-change="handlePageChange">
                        </el-pagination>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                © 2023 报表订阅管理平台 | 基于Vue2 + ElementUI构建
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    // 开发中报表数据
                    developingReports: [
                        {id: 1, name: '销售业绩分析', description: '按区域和产品线分析的销售业绩报表', owner: '张三', createdAt: '2023-06-15', status: 'dev'},
                        {id: 2, name: '用户行为分析', description: '用户使用产品的行为路径和转化率分析', owner: '李四', createdAt: '2023-07-01', status: 'dev'},
                        {id: 3, name: '库存周转报告', description: '各仓库库存周转情况分析', owner: '王五', createdAt: '2023-06-20', status: 'dev'},
                        {id: 4, name: '财务收支报表', description: '公司月度财务收支情况汇总', owner: '赵六', createdAt: '2023-07-05', status: 'dev'},
                        {id: 5, name: '市场活动效果', description: '市场活动ROI和转化效果分析', owner: '钱七', createdAt: '2023-06-25', status: 'dev'},
                        {id: 6, name: '客户满意度报告', description: '客户满意度调查结果分析', owner: '孙八', createdAt: '2023-07-10', status: 'dev'}
                    ],
                    
                    // 可订阅报表数据
                    subscribableReports: [
                        {id: 101, name: '销售日报', description: '每日销售数据汇总报表', subscribers: 24, updatedAt: '2023-07-12', status: 'sub'},
                        {id: 102, name: '财务报表', description: '月度财务报表包含利润表和资产负债表', subscribers: 18, updatedAt: '2023-07-10', status: 'sub'},
                        {id: 103, name: '运营周报', description: '关键运营指标每周报告', subscribers: 32, updatedAt: '2023-07-11', status: 'sub'},
                        {id: 104, name: '客户分析报告', description: '客户分群及价值分析', subscribers: 15, updatedAt: '2023-07-09', status: 'sub'},
                        {id: 105, name: '产品质量报告', description: '产品质量指标与缺陷分析', subscribers: 8, updatedAt: '2023-07-08', status: 'sub'}
                    ],
                    
                    // 订阅数据
                    subscriptions: [
                        {id: 1001, reportName: '销售日报', subscriber: '张三', status: 'active', frequency: 'daily', lastPush: '2023-07-12 08:30'},
                        {id: 1002, reportName: '财务报表', subscriber: '李四', status: 'active', frequency: 'monthly', lastPush: '2023-07-05 09:15'},
                        {id: 1003, reportName: '运营周报', subscriber: '王五', status: 'inactive', frequency: 'weekly', lastPush: '2023-07-04 10:20'},
                        {id: 1004, reportName: '客户分析报告', subscriber: '赵六', status: 'active', frequency: 'biweekly', lastPush: '2023-07-10 14:00'},
                        {id: 1005, reportName: '产品质量报告', subscriber: '钱七', status: 'active', frequency: 'monthly', lastPush: '2023-07-01 11:45'}
                    ],
                    
                    // 搜索和分页相关
                    devSearch: '',
                    subSearch: '',
                    subscriptionSearch: '',
                    devPage: 1,
                    subPage: 1,
                    currentPage: 1,
                    pageSize: 5
                };
            },
            computed: {
                // 过滤后的开发中报表
                filteredDevReports() {
                    let result = this.developingReports;
                    
                    if (this.devSearch) {
                        const search = this.devSearch.toLowerCase();
                        result = result.filter(r => 
                            r.name.toLowerCase().includes(search) || 
                            r.description.toLowerCase().includes(search) ||
                            r.owner.toLowerCase().includes(search)
                        );
                    }
                    
                    // 分页处理
                    const start = (this.devPage - 1) * 5;
                    return result.slice(start, start + 5);
                },
                
                // 过滤后的可订阅报表
                filteredSubReports() {
                    let result = this.subscribableReports;
                    
                    if (this.subSearch) {
                        const search = this.subSearch.toLowerCase();
                        result = result.filter(r => 
                            r.name.toLowerCase().includes(search) || 
                            r.description.toLowerCase().includes(search)
                        );
                    }
                    
                    // 分页处理
                    const start = (this.subPage - 1) * 5;
                    return result.slice(start, start + 5);
                },
                
                // 过滤后的订阅数据
                filteredSubscriptions() {
                    let result = this.subscriptions;
                    
                    if (this.subscriptionSearch) {
                        const search = this.subscriptionSearch.toLowerCase();
                        result = result.filter(s => 
                            s.reportName.toLowerCase().includes(search) || 
                            s.subscriber.toLowerCase().includes(search)
                        );
                    }
                    
                    // 分页处理
                    const start = (this.currentPage - 1) * this.pageSize;
                    return result.slice(start, start + this.pageSize);
                }
            },
            methods: {
                // 将报表从开发中移动到可订阅
                moveToSubscribable(report) {
                    this.$confirm(`确定将报表 "${report.name}" 设为可订阅状态?`, '提示', {
                        confirmButtonText: '确定',
                        cancelButtonText: '取消',
                        type: 'info'
                    }).then(() => {
                        const index = this.developingReports.findIndex(r => r.id === report.id);
                        if (index !== -1) {
                            const movedReport = this.developingReports.splice(index, 1)[0];
                            movedReport.status = 'sub';
                            movedReport.subscribers = 0;
                            movedReport.updatedAt = new Date().toISOString().split('T')[0];
                            this.subscribableReports.push(movedReport);
                            
                            this.$message.success(`报表 "${report.name}" 已设为可订阅状态`);
                        }
                    }).catch(() => {});
                },
                
                // 将报表从可订阅移回开发中
                moveToDeveloping(report) {
                    this.$confirm(`确定将报表 "${report.name}" 移回开发中状态?`, '提示', {
                        confirmButtonText: '确定',
                        cancelButtonText: '取消',
                        type: 'warning'
                    }).then(() => {
                        const index = this.subscribableReports.findIndex(r => r.id === report.id);
                        if (index !== -1) {
                            const movedReport = this.subscribableReports.splice(index, 1)[0];
                            movedReport.status = 'dev';
                            delete movedReport.subscribers;
                            movedReport.owner = '管理员';
                            this.developingReports.push(movedReport);
                            
                            this.$message.warning(`报表 "${report.name}" 已移回开发中状态`);
                        }
                    }).catch(() => {});
                },
                
                // 处理订阅状态变更
                handleStatusChange(subscription) {
                    const action = subscription.status === 'active' ? '启用' : '停用';
                    this.$message.success(`订阅状态已${action}`);
                },
                
                // 处理推送周期变更
                handleFrequencyChange(subscription) {
                    const frequencyMap = {
                        daily: '每天',
                        weekly: '每周',
                        biweekly: '每两周',
                        monthly: '每月'
                    };
                    this.$message.success(`推送周期已设置为 ${frequencyMap[subscription.frequency]}`);
                },
                
                // 查看历史记录
                handleViewHistory(subscription) {
                    this.$message.info(`查看 ${subscription.subscriber} 的订阅历史记录`);
                },
                
                // 刷新数据
                refreshData() {
                    this.$message.success('数据已刷新');
                },
                
                // 分页处理
                handleDevPageChange(page) {
                    this.devPage = page;
                },
                
                handleSubPageChange(page) {
                    this.subPage = page;
                },
                
                handleSizeChange(size) {
                    this.pageSize = size;
                    this.currentPage = 1;
                },
                
                handlePageChange(page) {
                    this.currentPage = page;
                }
            }
        });
    </script>
</body>
</html>