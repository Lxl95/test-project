<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的订阅 - 报表管理系统</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .subscription-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .header-title i {
            font-size: 28px;
            color: #409EFF;
            background: #ecf5ff;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .title-content h1 {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .title-content p {
            color: #7a8ca5;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 28px;
        }
        
        .icon-active {
            background: linear-gradient(135deg, #67C23A 0%, #85ce61 100%);
            color: white;
        }
        
        .icon-inactive {
            background: linear-gradient(135deg, #909399 0%, #a6a9ad 100%);
            color: white;
        }
        
        .icon-total {
            background: linear-gradient(135deg, #409EFF 0%, #66b1ff 100%);
            color: white;
        }
        
        .icon-recent {
            background: linear-gradient(135deg, #E6A23C 0%, #ebb563 100%);
            color: white;
        }
        
        .stat-content h3 {
            font-size: 28px;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .stat-content p {
            color: #7a8ca5;
            font-size: 14px;
        }
        
        .main-content {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid #ebeef5;
        }
        
        .content-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .content-actions {
            display: flex;
            gap: 15px;
        }
        
        .create-btn {
            background: linear-gradient(135deg, #409EFF 0%, #66b1ff 100%);
            border: none;
            color: white;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .create-btn:hover {
            background: linear-gradient(135deg, #3a8de0 0%, #5aa1f2 100%);
            box-shadow: 0 4px 12px rgba(64, 158, 255, 0.3);
        }
        
        .filter-container {
            display: flex;
            padding: 15px 25px;
            background: #f8fafc;
            border-bottom: 1px solid #ebeef5;
            gap: 15px;
        }
        
        .filter-item {
            display: flex;
            flex-direction: column;
            min-width: 180px;
        }
        
        .filter-item label {
            font-size: 13px;
            color: #7a8ca5;
            margin-bottom: 5px;
        }
        
        .subscription-table {
            padding: 0 15px;
        }
        
        .status-active {
            display: inline-block;
            padding: 5px 12px;
            background: #f0f9eb;
            color: #67c23a;
            border-radius: 20px;
            font-size: 13px;
        }
        
        .status-inactive {
            display: inline-block;
            padding: 5px 12px;
            background: #fef0f0;
            color: #f56c6c;
            border-radius: 20px;
            font-size: 13px;
        }
        
        .view-report-btn {
            background: #ecf5ff;
            color: #409EFF;
            border: none;
            padding: 7px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .view-report-btn:hover {
            background: #d9ecff;
            color: #3a8de0;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: #606266;
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s ease;
        }
        
        .action-btn:hover {
            color: #409EFF;
        }
        
        .pagination-container {
            padding: 20px;
            display: flex;
            justify-content: flex-end;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7a8ca5;
            font-size: 14px;
        }
        
        .empty-state {
            padding: 60px 20px;
            text-align: center;
            color: #c0c4cc;
        }
        
        .empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
            color: #e4e7ed;
        }
        
        .empty-text {
            font-size: 16px;
            margin-top: 15px;
        }
        
        .highlight {
            color: #409EFF;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-title {
                flex-direction: column;
            }
            
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .filter-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="subscription-container">
            <!-- 头部区域 -->
            <div class="header">
                <div class="header-title">
                    <i class="fas fa-bell"></i>
                    <div class="title-content">
                        <h1>我的订阅</h1>
                        <p>管理您订阅的所有报表，及时获取重要数据更新</p>
                    </div>
                </div>
                <div class="header-actions">
                    <el-button icon="el-icon-refresh" @click="refreshData">刷新数据</el-button>
                    <el-button icon="el-icon-setting">设置</el-button>
                    <el-dropdown trigger="click">
                        <span class="el-dropdown-link">
                            <el-avatar :size="40" :src="user.avatar" style="margin-right: 10px;"></el-avatar>
                            {{ user.name }}<i class="el-icon-arrow-down el-icon--right"></i>
                        </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item icon="el-icon-user">个人中心</el-dropdown-item>
                            <el-dropdown-item icon="el-icon-setting">账户设置</el-dropdown-item>
                            <el-dropdown-item icon="el-icon-switch-button">退出登录</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </div>
            </div>
            
            <!-- 统计卡片 -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon icon-total">
                        <i class="fas fa-list"></i>
                    </div>
                    <div class="stat-content">
                        <h3>{{ subscriptions.length }}</h3>
                        <p>总订阅数</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon icon-active">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <h3>{{ activeCount }}</h3>
                        <p>活跃订阅</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon icon-inactive">
                        <i class="fas fa-pause-circle"></i>
                    </div>
                    <div class="stat-content">
                        <h3>{{ inactiveCount }}</h3>
                        <p>已暂停订阅</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon icon-recent">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="stat-content">
                        <h3>{{ recentCount }}</h3>
                        <p>最近7天更新</p>
                    </div>
                </div>
            </div>
            
            <!-- 主内容区 -->
            <div class="main-content">
                <div class="content-header">
                    <div class="content-title">订阅列表</div>
                    <div class="content-actions">
                        <el-input 
                            placeholder="搜索订阅..." 
                            prefix-icon="el-icon-search"
                            v-model="searchQuery"
                            clearable
                            style="width: 250px; margin-right: 15px;">
                        </el-input>
                        <button class="create-btn" @click="createSubscription">
                            <i class="fas fa-plus"></i> 创建新订阅
                        </button>
                    </div>
                </div>
                
                <div class="filter-container">
                    <div class="filter-item">
                        <label>状态</label>
                        <el-select v-model="filterStatus" placeholder="全部状态">
                            <el-option label="全部状态" value="all"></el-option>
                            <el-option label="已启用" value="active"></el-option>
                            <el-option label="已停用" value="inactive"></el-option>
                        </el-select>
                    </div>
                    <div class="filter-item">
                        <label>报表类型</label>
                        <el-select v-model="filterReportType" placeholder="全部类型">
                            <el-option label="全部类型" value="all"></el-option>
                            <el-option label="销售报表" value="sales"></el-option>
                            <el-option label="财务报告" value="finance"></el-option>
                            <el-option label="运营数据" value="operations"></el-option>
                            <el-option label="客户分析" value="customer"></el-option>
                        </el-select>
                    </div>
                    <div class="filter-item">
                        <label>时间范围</label>
                        <el-date-picker
                            v-model="filterDateRange"
                            type="daterange"
                            range-separator="至"
                            start-placeholder="开始日期"
                            end-placeholder="结束日期"
                            style="width: 100%;">
                        </el-date-picker>
                    </div>
                </div>
                
                <div class="subscription-table">
                    <el-table :data="filteredSubscriptions" style="width: 100%">
                        <el-table-column prop="name" label="订阅名称" min-width="180">
                            <template slot-scope="scope">
                                <div style="display: flex; align-items: center;">
                                    <i class="fas fa-bell" style="color: #E6A23C; margin-right: 8px;"></i>
                                    <span>{{ scope.row.name }}</span>
                                </div>
                            </template>
                        </el-table-column>
                        <el-table-column prop="report" label="报表" min-width="180">
                            <template slot-scope="scope">
                                <div style="display: flex; align-items: center;">
                                    <i class="fas fa-file-alt" style="color: #409EFF; margin-right: 8px;"></i>
                                    <span>{{ scope.row.report }}</span>
                                </div>
                            </template>
                        </el-table-column>
                        <el-table-column prop="schedule" label="调度周期" width="150">
                            <template slot-scope="scope">
                                <el-tag type="info">{{ scope.row.schedule }}</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column prop="status" label="状态" width="120">
                            <template slot-scope="scope">
                                <span v-if="scope.row.status === 'active'" class="status-active">
                                    <i class="fas fa-check-circle"></i> 已启用
                                </span>
                                <span v-else class="status-inactive">
                                    <i class="fas fa-pause-circle"></i> 已停用
                                </span>
                            </template>
                        </el-table-column>
                        <el-table-column prop="lastExecuted" label="最后执行时间" width="180"></el-table-column>
                        <el-table-column prop="createdAt" label="订阅时间" width="180"></el-table-column>
                        <el-table-column label="操作" width="180">
                            <template slot-scope="scope">
                                <div style="display: flex; gap: 10px;">
                                    <button class="view-report-btn" @click="viewReport(scope.row)">
                                        <i class="fas fa-eye"></i> 查看报表
                                    </button>
                                    <el-dropdown trigger="click">
                                        <button class="action-btn">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <el-dropdown-menu slot="dropdown">
                                            <el-dropdown-item @click.native="editSubscription(scope.row)">
                                                <i class="fas fa-edit"></i> 编辑订阅
                                            </el-dropdown-item>
                                            <el-dropdown-item @click.native="toggleStatus(scope.row)">
                                                <i class="fas fa-power-off"></i> {{ scope.row.status === 'active' ? '停用' : '启用' }}
                                            </el-dropdown-item>
                                            <el-dropdown-item @click.native="deleteSubscription(scope.row)" style="color: #F56C6C;">
                                                <i class="fas fa-trash-alt"></i> 删除
                                            </el-dropdown-item>
                                        </el-dropdown-menu>
                                    </el-dropdown>
                                </div>
                            </template>
                        </el-table-column>
                    </el-table>
                    
                    <div v-if="filteredSubscriptions.length === 0" class="empty-state">
                        <i class="fas fa-inbox empty-icon"></i>
                        <h3>暂无订阅记录</h3>
                        <p class="empty-text">您还没有创建任何订阅，点击<span class="highlight">创建新订阅</span>按钮开始</p>
                    </div>
                </div>
                
                <div class="pagination-container">
                    <el-pagination
                        background
                        layout="total, sizes, prev, pager, next"
                        :total="subscriptions.length"
                        :page-sizes="[5, 10, 20]"
                        :page-size="pageSize"
                        :current-page="currentPage"
                        @size-change="handleSizeChange"
                        @current-change="handlePageChange">
                    </el-pagination>
                </div>
            </div>
            
            <div class="footer">
                <p>© 2023 报表管理系统 | 我的订阅页面</p>
                <p>当前版本: v2.1.0 | 最后更新: 2023-07-15</p>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    user: {
                        name: '张明',
                        avatar: 'https://pic1.zhimg.com/80/v2-6afa72220d29f045ac92a9f3f5b5e3b1_720w.webp',
                        role: '高级分析师'
                    },
                    subscriptions: [
                        {
                            id: 1,
                            name: '每日销售摘要',
                            report: '销售日报',
                            schedule: '每日 08:00',
                            status: 'active',
                            lastExecuted: '2023-07-15 08:05:23',
                            createdAt: '2023-06-10 14:30:12',
                            type: 'sales'
                        },
                        {
                            id: 2,
                            name: '财务月度报告',
                            report: '财务月报',
                            schedule: '每月1号 09:00',
                            status: 'active',
                            lastExecuted: '2023-07-01 09:12:45',
                            createdAt: '2023-05-22 10:15:33',
                            type: 'finance'
                        },
                        {
                            id: 3,
                            name: '用户活跃分析',
                            report: '用户行为周报',
                            schedule: '每周一 10:00',
                            status: 'inactive',
                            lastExecuted: '2023-07-03 10:05:17',
                            createdAt: '2023-07-05 16:45:21',
                            type: 'customer'
                        },
                        {
                            id: 4,
                            name: '库存监控',
                            report: '库存日报',
                            schedule: '每日 17:30',
                            status: 'active',
                            lastExecuted: '2023-07-15 17:35:08',
                            createdAt: '2023-06-28 11:20:55',
                            type: 'operations'
                        },
                        {
                            id: 5,
                            name: '营销活动效果',
                            report: '营销活动分析',
                            schedule: '活动结束后',
                            status: 'active',
                            lastExecuted: '2023-07-12 14:20:33',
                            createdAt: '2023-07-01 09:40:22',
                            type: 'sales'
                        },
                        {
                            id: 6,
                            name: '季度财务预测',
                            report: '财务预测报告',
                            schedule: '每季度末',
                            status: 'inactive',
                            lastExecuted: '2023-06-30 15:45:19',
                            createdAt: '2023-05-15 13:25:47',
                            type: 'finance'
                        }
                    ],
                    searchQuery: '',
                    filterStatus: 'all',
                    filterReportType: 'all',
                    filterDateRange: [],
                    currentPage: 1,
                    pageSize: 5
                };
            },
            computed: {
                activeCount() {
                    return this.subscriptions.filter(s => s.status === 'active').length;
                },
                inactiveCount() {
                    return this.subscriptions.filter(s => s.status === 'inactive').length;
                },
                recentCount() {
                    const oneWeekAgo = new Date();
                    oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
                    return this.subscriptions.filter(s => {
                        const lastExecuted = new Date(s.lastExecuted);
                        return lastExecuted > oneWeekAgo;
                    }).length;
                },
                filteredSubscriptions() {
                    let result = this.subscriptions;
                    
                    // 应用搜索过滤
                    if (this.searchQuery) {
                        const query = this.searchQuery.toLowerCase();
                        result = result.filter(s => 
                            s.name.toLowerCase().includes(query) || 
                            s.report.toLowerCase().includes(query)
                        );
                    }
                    
                    // 应用状态过滤
                    if (this.filterStatus !== 'all') {
                        result = result.filter(s => s.status === this.filterStatus);
                    }
                    
                    // 应用报表类型过滤
                    if (this.filterReportType !== 'all') {
                        result = result.filter(s => s.type === this.filterReportType);
                    }
                    
                    // 应用分页
                    const start = (this.currentPage - 1) * this.pageSize;
                    return result.slice(start, start + this.pageSize);
                }
            },
            methods: {
                refreshData() {
                    this.$message({
                        message: '数据已刷新',
                        type: 'success',
                        duration: 1500
                    });
                },
                createSubscription() {
                    this.$message({
                        message: '打开创建订阅对话框',
                        type: 'info'
                    });
                },
                viewReport(row) {
                    this.$message({
                        message: `查看报表: ${row.report}`,
                        type: 'success'
                    });
                },
                editSubscription(row) {
                    this.$message({
                        message: `编辑订阅: ${row.name}`,
                        type: 'info'
                    });
                },
                toggleStatus(row) {
                    const newStatus = row.status === 'active' ? 'inactive' : 'active';
                    const action = newStatus === 'active' ? '启用' : '停用';
                    
                    // 在实际应用中，这里会调用API更新状态
                    row.status = newStatus;
                    
                    this.$message({
                        message: `已${action}订阅: ${row.name}`,
                        type: 'success'
                    });
                },
                deleteSubscription(row) {
                    this.$confirm(`确定删除订阅 "${row.name}"?`, '提示', {
                        confirmButtonText: '确定',
                        cancelButtonText: '取消',
                        type: 'warning'
                    }).then(() => {
                        // 在实际应用中，这里会调用API删除订阅
                        const index = this.subscriptions.findIndex(s => s.id === row.id);
                        if (index !== -1) {
                            this.subscriptions.splice(index, 1);
                        }
                        
                        this.$message({
                            message: `订阅 "${row.name}" 已删除`,
                            type: 'success'
                        });
                    }).catch(() => {});
                },
                handleSizeChange(size) {
                    this.pageSize = size;
                    this.currentPage = 1;
                },
                handlePageChange(page) {
                    this.currentPage = page;
                }
            }
        });
    </script>
</body>
</html>