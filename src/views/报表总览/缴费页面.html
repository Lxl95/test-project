<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ°´è´¹ç¼´çº³ - æ°´åŠ¡æœåŠ¡</title>
    <!-- å¼•å…¥Element UIæ ·å¼ -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- å¼•å…¥Vueå’ŒElement UI -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", Arial, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.5;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        .water-fee-container {
            padding: 15px;
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px 0;
            background: linear-gradient(135deg, #1e88e5 0%, #0d47a1 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(30, 136, 229, 0.3);
        }
        
        .header h1 {
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 8px;
            color: #1e88e5;
        }
        
        .user-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        
        .info-item {
            width: 48%;
            margin-bottom: 15px;
        }
        
        .info-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 16px;
            font-weight: 500;
        }
        
        .fee-detail {
            margin-top: 10px;
        }
        
        .fee-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .fee-item:last-child {
            border-bottom: none;
        }
        
        .fee-label {
            color: #666;
        }
        
        .fee-value {
            font-weight: 500;
        }
        
        .total-fee {
            font-size: 20px;
            font-weight: 600;
            color: #f56c6c;
            text-align: right;
            margin-top: 10px;
        }
        
        .payment-methods {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .payment-method {
            flex: 1;
            min-width: 100px;
            border: 2px solid #eee;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-method.active {
            border-color: #1e88e5;
            background-color: #f0f7ff;
        }
        
        .payment-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .payment-name {
            font-size: 14px;
        }
        
        .action-buttons {
            margin-top: 30px;
            display: flex;
            gap: 15px;
        }
        
        .action-buttons .el-button {
            flex: 1;
            height: 50px;
            font-size: 16px;
            border-radius: 25px;
        }
        
        .history-record {
            margin-top: 20px;
        }
        
        .record-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .record-date {
            color: #666;
            font-size: 14px;
        }
        
        .record-amount {
            font-weight: 500;
        }
        
        .record-status {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        .status-paid {
            background-color: #f0f9ff;
            color: #1e88e5;
        }
        
        .footer {
            margin-top: auto;
            padding: 15px 0;
            text-align: center;
            color: #999;
            font-size: 12px;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 480px) {
            .water-fee-container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .card {
                padding: 15px;
            }
            
            .info-item {
                width: 100%;
            }
            
            .payment-method {
                min-width: 80px;
            }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }
        
        .el-loading-spinner .circular {
            width: 30px;
            height: 30px;
        }
        
        /* è‡ªå®šä¹‰Element UIç»„ä»¶æ ·å¼ */
        .el-input__inner {
            height: 45px;
            border-radius: 8px;
        }
        
        .el-button {
            border-radius: 8px;
        }
        
        .el-dialog {
            width: 90% !important;
            max-width: 400px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="water-fee-container">
            <div class="header">
                <h1>æ°´è´¹ç¼´çº³</h1>
                <p>ä¾¿æ·ç¼´è´¹ï¼Œç”¨å¿ƒæœåŠ¡</p>
            </div>
            
            <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
            <div class="card">
                <div class="card-title">
                    <i class="el-icon-user-solid"></i> ç”¨æˆ·ä¿¡æ¯
                </div>
                <div class="user-info">
                    <div class="info-item">
                        <div class="info-label">æˆ·å·</div>
                        <div class="info-value">{{ userInfo.accountNo }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">æˆ·å</div>
                        <div class="info-value">{{ userInfo.customerName }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">åœ°å€</div>
                        <div class="info-value">{{ userInfo.address }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ä¸Šæ¬¡æŠ„è¡¨æ—¥æœŸ</div>
                        <div class="info-value">{{ userInfo.lastReadingDate }}</div>
                    </div>
                </div>
            </div>
            
            <!-- æ¬ è´¹ä¿¡æ¯å¡ç‰‡ -->
            <div class="card">
                <div class="card-title">
                    <i class="el-icon-wallet"></i> æ¬ è´¹ä¿¡æ¯
                </div>
                <div class="fee-detail">
                    <div class="fee-item">
                        <span class="fee-label">æœ¬æœŸæ°´è´¹</span>
                        <span class="fee-value">Â¥ {{ currentFee.waterFee }}</span>
                    </div>
                    <div class="fee-item">
                        <span class="fee-label">æ±¡æ°´å¤„ç†è´¹</span>
                        <span class="fee-value">Â¥ {{ currentFee.sewageFee }}</span>
                    </div>
                    <div class="fee-item">
                        <span class="fee-label">æ°´èµ„æºè´¹</span>
                        <span class="fee-value">Â¥ {{ currentFee.resourceFee }}</span>
                    </div>
                    <div class="fee-item">
                        <span class="fee-label">æ»çº³é‡‘</span>
                        <span class="fee-value">Â¥ {{ currentFee.lateFee }}</span>
                    </div>
                    <div class="total-fee">
                        åˆè®¡: Â¥ {{ totalFee }}
                    </div>
                </div>
            </div>
            
            <!-- ç¼´è´¹é‡‘é¢è¾“å…¥ -->
            <div class="card">
                <div class="card-title">
                    <i class="el-icon-edit"></i> ç¼´è´¹é‡‘é¢
                </div>
                <el-input 
                    v-model="paymentAmount" 
                    placeholder="è¯·è¾“å…¥ç¼´è´¹é‡‘é¢" 
                    type="number"
                    @input="validateAmount">
                    <template slot="append">å…ƒ</template>
                </el-input>
                <div style="margin-top: 15px; display: flex; gap: 10px;">
                    <el-button 
                        v-for="amount in quickAmounts" 
                        :key="amount"
                        @click="selectAmount(amount)"
                        :type="paymentAmount == amount ? 'primary' : ''"
                        size="small">
                        {{ amount }}å…ƒ
                    </el-button>
                </div>
            </div>
            
            <!-- æ”¯ä»˜æ–¹å¼é€‰æ‹© -->
            <div class="card">
                <div class="card-title">
                    <i class="el-icon-bank-card"></i> æ”¯ä»˜æ–¹å¼
                </div>
                <div class="payment-methods">
                    <div 
                        v-for="method in paymentMethods" 
                        :key="method.id"
                        :class="['payment-method', { active: selectedMethod === method.id }]"
                        @click="selectMethod(method.id)">
                        <div class="payment-icon">{{ method.icon }}</div>
                        <div class="payment-name">{{ method.name }}</div>
                    </div>
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="action-buttons">
                <el-button type="primary" @click="confirmPayment" :loading="loading">
                    {{ loading ? 'æ”¯ä»˜ä¸­...' : 'ç«‹å³æ”¯ä»˜' }}
                </el-button>
                <el-button @click="showHistory">ç¼´è´¹è®°å½•</el-button>
            </div>
            
            <!-- ç¼´è´¹è®°å½• -->
            <div class="card history-record" v-if="showRecords">
                <div class="card-title">
                    <i class="el-icon-tickets"></i> æœ€è¿‘ç¼´è´¹è®°å½•
                </div>
                <div v-for="record in paymentHistory" :key="record.id" class="record-item">
                    <div>
                        <div class="record-date">{{ record.date }}</div>
                        <div>é‡‘é¢: {{ record.amount }}å…ƒ</div>
                    </div>
                    <div>
                        <div class="record-amount">{{ record.paymentMethod }}</div>
                        <span :class="['record-status', 'status-paid']">å·²æ”¯ä»˜</span>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                <p>æ°´åŠ¡æœåŠ¡çƒ­çº¿: 12345</p>
                <p>Â© 2023 æ™ºæ…§æ°´åŠ¡ ç‰ˆæƒæ‰€æœ‰</p>
            </div>
        </div>
        
        <!-- æ”¯ä»˜ç¡®è®¤å¯¹è¯æ¡† -->
        <el-dialog
            title="ç¡®è®¤æ”¯ä»˜"
            :visible.sync="confirmDialogVisible"
            width="90%"
            center>
            <div style="text-align: center; padding: 20px 0;">
                <h3 style="margin-bottom: 10px;">è¯·ç¡®è®¤æ”¯ä»˜ä¿¡æ¯</h3>
                <p>æˆ·å·: {{ userInfo.accountNo }}</p>
                <p>æˆ·å: {{ userInfo.customerName }}</p>
                <p style="font-size: 24px; color: #f56c6c; margin: 15px 0;">æ”¯ä»˜é‡‘é¢: Â¥{{ paymentAmount }}</p>
                <p>æ”¯ä»˜æ–¹å¼: {{ getMethodName(selectedMethod) }}</p>
            </div>
            <span slot="footer" class="dialog-footer">
                <el-button @click="confirmDialogVisible = false">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="processPayment">ç¡®è®¤æ”¯ä»˜</el-button>
            </span>
        </el-dialog>
        
        <!-- æ”¯ä»˜ç»“æœå¯¹è¯æ¡† -->
        <el-dialog
            :title="paymentResult.title"
            :visible.sync="resultDialogVisible"
            width="90%"
            center>
            <div style="text-align: center; padding: 20px 0;">
                <i :class="paymentResult.icon" :style="{color: paymentResult.color, fontSize: '50px', marginBottom: '15px'}"></i>
                <p style="font-size: 18px; margin-bottom: 10px;">{{ paymentResult.message }}</p>
                <p v-if="paymentResult.success">è®¢å•å·: {{ orderNo }}</p>
            </div>
            <span slot="footer" class="dialog-footer">
                <el-button type="primary" @click="resultDialogVisible = false">ç¡®å®š</el-button>
            </span>
        </el-dialog>
    </div>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    userInfo: {
                        accountNo: '20230528001',
                        customerName: 'å¼ å…ˆç”Ÿ',
                        address: 'åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè¡—é“æŸæŸå°åŒº1æ ‹101å®¤',
                        lastReadingDate: '2023-05-20'
                    },
                    currentFee: {
                        waterFee: 85.50,
                        sewageFee: 25.30,
                        resourceFee: 8.20,
                        lateFee: 0.00
                    },
                    paymentAmount: '',
                    quickAmounts: [50, 100, 150, 200],
                    paymentMethods: [
                        { id: 1, name: 'å¾®ä¿¡æ”¯ä»˜', icon: 'ğŸ’³' },
                        { id: 2, name: 'æ”¯ä»˜å®', icon: 'ğŸ’°' },
                        { id: 3, name: 'é“¶è”æ”¯ä»˜', icon: 'ğŸ¦' },
                        { id: 4, name: 'ä½™é¢æ”¯ä»˜', icon: 'ğŸ’' }
                    ],
                    selectedMethod: 1,
                    showRecords: false,
                    paymentHistory: [
                        { id: 1, date: '2023-04-25', amount: 118.50, paymentMethod: 'å¾®ä¿¡æ”¯ä»˜' },
                        { id: 2, date: '2023-03-22', amount: 105.80, paymentMethod: 'æ”¯ä»˜å®' },
                        { id: 3, date: '2023-02-20', amount: 98.30, paymentMethod: 'å¾®ä¿¡æ”¯ä»˜' }
                    ],
                    confirmDialogVisible: false,
                    resultDialogVisible: false,
                    loading: false,
                    paymentResult: {
                        success: false,
                        title: '',
                        message: '',
                        icon: '',
                        color: ''
                    },
                    orderNo: ''
                }
            },
            computed: {
                totalFee() {
                    return (this.currentFee.waterFee + 
                           this.currentFee.sewageFee + 
                           this.currentFee.resourceFee + 
                           this.currentFee.lateFee).toFixed(2);
                }
            },
            methods: {
                validateAmount() {
                    // é™åˆ¶è¾“å…¥é‡‘é¢ä¸èƒ½ä¸ºè´Ÿæ•°
                    if (this.paymentAmount < 0) {
                        this.paymentAmount = '';
                    }
                },
                selectAmount(amount) {
                    this.paymentAmount = amount;
                },
                selectMethod(methodId) {
                    this.selectedMethod = methodId;
                },
                confirmPayment() {
                    if (!this.paymentAmount || this.paymentAmount <= 0) {
                        this.$message.error('è¯·è¾“å…¥æœ‰æ•ˆçš„ç¼´è´¹é‡‘é¢');
                        return;
                    }
                    
                    this.confirmDialogVisible = true;
                },
                processPayment() {
                    this.confirmDialogVisible = false;
                    this.loading = true;
                    
                    // æ¨¡æ‹Ÿæ”¯ä»˜è¿‡ç¨‹
                    setTimeout(() => {
                        this.loading = false;
                        // æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸï¼ˆ80%æ¦‚ç‡æˆåŠŸï¼‰
                        const success = Math.random() > 0.2;
                        
                        if (success) {
                            this.paymentResult = {
                                success: true,
                                title: 'æ”¯ä»˜æˆåŠŸ',
                                message: 'æ°´è´¹ç¼´çº³æˆåŠŸï¼Œæ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ï¼',
                                icon: 'el-icon-success',
                                color: '#67C23A'
                            };
                            // ç”Ÿæˆéšæœºè®¢å•å·
                            this.orderNo = 'WT' + Date.now();
                        } else {
                            this.paymentResult = {
                                success: false,
                                title: 'æ”¯ä»˜å¤±è´¥',
                                message: 'æ”¯ä»˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ”¯ä»˜æ–¹å¼æˆ–è´¦æˆ·ä½™é¢åé‡è¯•',
                                icon: 'el-icon-error',
                                color: '#F56C6C'
                            };
                        }
                        
                        this.resultDialogVisible = true;
                    }, 2000);
                },
                showHistory() {
                    this.showRecords = !this.showRecords;
                },
                getMethodName(methodId) {
                    const method = this.paymentMethods.find(m => m.id === methodId);
                    return method ? method.name : '';
                }
            },
            mounted() {
                // é»˜è®¤é€‰æ‹©å…¨éƒ¨æ¬ è´¹é‡‘é¢
                this.paymentAmount = this.totalFee;
            }
        });
    </script>
</body>
</html>